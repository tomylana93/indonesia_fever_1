local transf = require "transf"
local vec3 = require "vec3"
local modulesutil = require "modulesutil"
local constructionutil = require "constructionutil"
local trainstationutil = require "modules/trainstationutil"

local cargoCapacity = 0
local passengerCapacity = 150

--Begin Generated
local generatedData = {
	["main"] = {
		models = {
			["station/rail/era_c/station_3.mdl"] = {
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000 },
			},
		},
	},
	["assets"] = {
		models = {
			["asset/roof/era_b_lamp_b_02.mdl"] = {
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 16.24430, -5.20000, 4.39750, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 8.76413, -5.20000, 4.39750, 1.00000 },
				{ -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, -1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 8.76413, -29.50000, 3.63750, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 1.25469, -5.20000, 4.39750, 1.00000 },
				{ -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, -1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 1.25469, -29.50000, 3.63750, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -6.25279, -5.20000, 4.39750, 1.00000 },
				{ -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, -1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -6.25279, -29.50000, 3.63750, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -13.73960, -5.20000, 4.39750, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 13.73960, -5.20000, 4.39750, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 6.25943, -5.20000, 4.39750, 1.00000 },
				{ -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, -1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 6.25943, -29.50000, 3.63750, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -1.25000, -5.20000, 4.39750, 1.00000 },
				{ -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, -1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -1.25000, -29.50000, 3.63750, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -8.75749, -5.20000, 4.39750, 1.00000 },
				{ -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, -1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -8.75749, -29.50000, 3.63750, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -16.24430, -5.20000, 4.39750, 1.00000 },
			},
			["station/rail/asset/era_c_single_chair.mdl"] = {
				{ -0.00000, -1.00000, 0.00000, 0.00000, 1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 16.24430, -4.60000, 0.80000, 1.00000 },
				{ -0.00000, -1.00000, 0.00000, 0.00000, 1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -13.72513, -4.60000, 0.80000, 1.00000 },
				{ -0.00000, 1.00000, 0.00000, 0.00000, -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -17.50000, -30.54000, 0.00000, 1.00000 },
				{ -0.00000, -1.00000, 0.00000, 0.00000, 1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 13.73960, -4.60000, 0.80000, 1.00000 },
				{ -0.00000, 1.00000, 0.00000, 0.00000, -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 17.50000, -30.54000, 0.00000, 1.00000 },
				{ -0.00000, -1.00000, 0.00000, 0.00000, 1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -16.22982, -4.60000, 0.80000, 1.00000 },
			},
			["station/rail/asset/era_c_street_pillar.mdl"] = {
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -20.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -18.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -16.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -14.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -12.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -10.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -8.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -6.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -4.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -2.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 2.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 4.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 6.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 8.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 10.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 12.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 14.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 16.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 18.00000, -37.00000, 0.00000, 1.00000 },
				{ 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 20.00000, -37.00000, 0.00000, 1.00000 },
			},
			["station/rail/asset/era_c_trashcan.mdl"] = {
				{ -0.00000, 1.00000, 0.00000, 0.00000, -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 11.25000, -4.50000, 0.80000, 1.00000 },
				{ -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, -1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 15.41500, -31.15000, 0.00000, 1.00000 },
				{ -0.00000, 1.00000, 0.00000, 0.00000, -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -11.25000, -4.50000, 0.80000, 1.00000 },
				{ -1.00000, -0.00000, 0.00000, 0.00000, 0.00000, -1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 0.00000, -15.41500, -31.15000, 0.00000, 1.00000 },
			},
		},
	},
}
--End Generated

function data()

return { 
	cost = {
		price = 25000,
	},
	category = {
		categories = { "passenger buildings", },
	},
	description = {
		name = _("Large side building"),
		description = _("Large side building with street access for passenger stations. Provides capacity for 150 passengers."),
		icon = "ui/construction/station/rail/modular_station/side_building_3_era_c.tga",
	}, 
	availability = {
		yearFrom = 1980,
	},
	type = "rail_side_building_size3",
	order = {
		value = 751,
	},
	metadata = {
		era = 2,
		level = 3,
		span = {0, 3},
		has_roof = true,
		moreCapacity = {
			cargo = cargoCapacity,
			passenger = passengerCapacity
		}
	},
	
	updateFn = function(result, transform, tag, slotId, addModuleFn, params)
		local config = {
			extend = { 21, -21, 0, -38, 4, 0 },
			main = "station/rail/era_c/station_3.mdl",
			con_left = {"station/rail/era_c/station_3_con_l_1.mdl","station/rail/era_c/station_3_con_l_2.mdl","station/rail/era_c/station_3_con_l_3.mdl",},
			con_right = {"station/rail/era_c/station_3_con_r_1.mdl","station/rail/era_c/station_3_con_r_2.mdl","station/rail/era_c/station_3_con_r_3.mdl",},
			end_left = "station/rail/era_c/station_3_end_l.mdl",
			end_right = "station/rail/era_c/station_3_end_r.mdl",
			roof_side = "station/rail/era_c/station_3_roof_perron_side.mdl",
			roof_head = "station/rail/era_c/station_3_roof_perron_head.mdl",
			slotIdOffset = 7,
			translationY = 0,
		}
	
		local tran,i,j,k,head,side = trainstationutil.MakeMainBuildingModule(result, transform, tag, slotId, addModuleFn, params, config)
		constructionutil.addModels(generatedData["assets"], result.models, tran, tag)

		if head then
			local add = false
			for s = -3, 4 do
				local front = result.GetRoofAt(i+s, j)
				if front and front.metadata.platform_roof_curved then
					add = true
					break
				end
			end
			if add then
				addModuleFn(config.roof_head, transf.rotZTransl(math.rad(-90), vec3.new(7.5,0,0)))
			end
		else
			if k == 0 then 
				local front = result.GetRoofAt(i, j)
				if front and front.metadata.platform_roof_curved then
					addModuleFn(config.roof_side, transf.rotZTransl(math.rad(-90), vec3.new(7.5,0,0)))
				end
			end
		end
	end,
	
	getModelsFn = function()
		
		local result = {
			{ 
				id = "station/rail/era_c/station_3.mdl",
				transf = transf.rotZTransl(math.rad(-90), vec3.new(15,0,0)),
			},
			{ 
				id = "station/rail/era_c/station_3_end_l.mdl",
				transf = transf.rotZTransl(math.rad(-90), vec3.new(15,0,0)),
			},
			{ 
				id = "station/rail/era_c/station_3_end_r.mdl",
				transf = transf.rotZTransl(math.rad(-90), vec3.new(15,0,0)),
			},
		}
		
		return result
	end
}

end
